<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>(Hu)go Template Primer | sqjian's blog</title><link rel=stylesheet href=https://sqjian.github.io//css/styles.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.3.1.js integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script src=https://sqjian.github.io//js/highlight.js></script><link type=text/css rel=stylesheet href=https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css><link type=text/css rel=stylesheet href=https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-minima.css><script type=text/javascript src=https://sqjian.github.io//js/jssocials.js></script><div class=container><nav class="navbar level"><div class=navbar-brand><a class=nav-item href=https://sqjian.github.io/><h1 class="title is-3">sqjian's blog</h1></a></div><div class="navbar-menu has-text-centered is-active"><div class="navbar-end is-centered"><a href=https://sqjian.github.io/about rel=me><span class=icon><i class="fas fa-info"></i></span></a></div></div></nav></div><div class=container><h2 class="subtitle is-6">April 2, 2014</h2><h1 class="subtitle is-size-4-mobile is-size-3-desktop">(Hu)go Template Primer</h1><div class=content><h2 id=1整体架构>1、整体架构</h2><p><img src=../../static/architecture.png alt=architecture></p><h3 id=11核心组件>1.1、核心组件：</h3><ul><li>etcd保存了整个集群的状态；</li><li>apiserver提供了资源操作的唯一入口，并提供认证、授权、访问控制、API注册和发现等机制；</li><li>controller manager负责维护集群的状态，比如故障检测、自动扩展、滚动更新等；</li><li>scheduler负责资源的调度，按照预定的调度策略将Pod调度到相应的机器上；</li><li>kubelet负责维护容器的生命周期，同时也负责Volume（CVI）和网络（CNI）的管理；</li><li>Container runtime负责镜像管理以及Pod和容器的真正运行（CRI）；</li><li>kube-proxy负责为Service提供cluster内部的服务发现和负载均衡；</li></ul><h3 id=12附加组件>1.2、附加组件：</h3><ul><li>kube-dns负责为整个集群提供DNS服务</li><li>Ingress Controller为服务提供外网入口</li><li>Heapster提供资源监控</li><li>Dashboard提供GUI</li><li>Federation提供跨可用区的集群</li><li>Fluentd-elasticsearch提供集群日志采集、存储与查询</li></ul><h2 id=2分层架构>2、分层架构</h2><p><img src=../../static/layered_architecture.jpg alt=layered_architecture></p><ul><li>核心层：Kubernetes最核心的功能，对外提供API构建高层的应用，对内提供插件式应用执行环境</li><li>应用层：部署（无状态应用、有状态应用、批处理任务、集群应用等）和路由（服务发现、DNS解析等）</li><li>管理层：系统度量（如基础设施、容器和网络的度量），自动化（如自动扩展、动态Provision等）以及策略管理（RBAC、Quota、PSP、NetworkPolicy等）</li><li>接口层：kubectl命令行工具、客户端SDK以及集群联邦</li><li>生态系统：在接口层之上的庞大容器集群管理调度的生态系统，可以划分为两个范畴<ul><li>Kubernetes外部：日志、监控、配置管理、CI、CD、Workflow、FaaS、OTS应用、ChatOps等</li><li>Kubernetes内部：CRI、CNI、CVI、镜像仓库、Cloud Provider、集群自身的配置和管理等</li></ul></li></ul></div></div><div class="container has-text-centered"><aside><div id=share></div></aside><script type=text/javascript>$("#share").jsSocials({showLabel:false,showCount:false,shares:["email","twitter","facebook","googleplus","linkedin","pinterest","stumbleupon","whatsapp"]});</script></div><div class="container has-text-centered"></div><section class=section><div class="container has-text-centered"><p>&copy; <a href=https://github.com/natarajmb>Nataraj Basappa</a> 2018</p></div></section>